# phisap - PHIgros Semi-Auto Player
适用于音游Phigros的半自动打歌器，**仅支持安卓/鸿蒙设备**。

## 免责声明
+ 本项目属于个人兴趣项目，与厦门鸽游网络有限公司无关。
+ **本项目内不含任何版权素材，且本项目并非商业项目**。
+ 项目的服务端借用自[Genymobile/scrcpy](https://github.com/Genymobile/scrcpy)，在此感谢scrcpy的作者和维护者们。
+ 截止目前，项目作者从未在任何除GitHub以外的平台上以任何方式宣传过本项目。

## 约法三章
为了节省我们双方的时间，**当你进行与本项目相关的行为时，务必遵守下面的规定**
<details>
<summary>为了节省版面作折叠处理，请展开查看</summary>

+ **如果你是未成年人，请远离本项目，否则你要保证你会为你的行为负责。而成年人必须要为自己的行为负责。**

+ **禁止在各大社交网站以任何方式宣传本项目。**
  + 如果你看到了有人在宣传本项目（无论赞扬地或批判地），请（以下任选）：
    + 要求对方删除相关内容
    + 利用平台的举报功能举报对方的内容
    + 给对方的内容点踩
    + 无视对方的宣传内容，不给其增加热度
+ **你因使用或修改本程序所造成的一切后果由你自己承担。**
+ **项目作者(kvarenzn)保留本项目所有权及对项目内所有内容的最终解释权。**
+ 当你在使用本项目遇到问题时，在提issue时请务必遵循下面”提出问题“一章的规定。
+ 禁止在本项目的任何位置（包括issue页面和将来的wiki页面）提出或探讨关于“音游王（简写为：yyw）”的应对措施。

</details>

**如果你不同意这些规定，那请你远离本项目，否则后果自负。**

## 灵感来源
> tips: sudo 板子自己打歌

## 成果展示

<details>
<summary>三张手机截图</summary>

![截图1](./screenshots/phone-shot1.jpg)

![截图2](./screenshots/phone-shot2.jpg)

![截图3](./screenshots/phone-shot3.jpg)

</details>

## 如何使用

### 准备
0. **请安装Python 3.10。**
1. `pip install -r requirements.txt`。
2. 请安装`Android Debug Bridge`，**要求版本号至少为`1.0.41`**，并确保相应的环境变量已经配置好。
3. 请准备Phigros的游戏安装包。目前支持v1.6.9至v2.1.1。
4. 准备服务端。请去[scrcpy的releases页面](https://github.com/Genymobile/scrcpy/releases) 下载`scrcpy-server-v1.22`，下载后请**直接**放到本项目的根文件夹下(文件的全名就叫`scrcpy-server-v1.22`，一定不要改成别的名称！！)。

### 运行
```bash
python main.py
```

## 注意事项
+ 本程序**不依赖**root权限工作。
+ 本程序的工作原理为向游戏设备发送触控事件来模拟人类游玩时的点击、长按或滑动，所以一些情况下仍有可能因误触发三指截屏或通知中心而导致miss。
+ 如果你发现在使用phisap完成某首歌时，击打出的音符一直Late或Early：这不是phisap的问题，而是你的计时器同步这一操作没有做好。请调整相关参数并重试。

## 提出问题

当你在使用本项目时遇到了问题，可以提issue，但要遵循下面的规定

<details>
<summary>为节省版面作折叠处理，请展开查看</summary>

+ **不要提与本项目无关的issue**

  + **不要提出与安装依赖相关的issue**。如果你在安装本项目的依赖时遇到了问题（如某个库安装失败，或者`pip install`报错），**请自行百度或谷歌解决**。如果你在搜索后还是无法解决这类问题，说明本项目不适合你，请放弃并远离本项目。

  + **不要提与防治音游王或小鬼相关的issue**。项目作者根本不关心什么寄吧小鬼或者音游王，不要在这里彰显你的“正义”。
  + **不要在issue里教别人应该在哪些情境下使用本项目**。不要指导别人：“你只能用这个项目解魔王曲，并且解完应该使用adb回档”或是类似的内容。牢记下面两句话：你寄吧谁啊。我寄吧谁啊。

+ 尽量不要提重复的issue。善用github的搜索功能，或许你遇到的问题别人已经提出过并已经有了解决方案。

</details>

## 待办列表
+ [ ] 支持adb无线调试，防治数据线警察出警 
+ [ ] 重写解包代码，使之可以解出图像/字体素材
+ [ ] 使用PySide6+QML重置用户界面
+ [ ] 重写规划算法，使规划出来的手法更具有参考价值
+ [ ] 加入编辑手法的功能
+ [ ] 支持PhiCommunity
+ [ ] 支持PE/RPE的自制谱格式
+ [ ] 完善对韵律源点的支持

## 对Arcaea的支持
项目`闊靛緥婧愮偣/`文件夹下的文件实现了最简陋的对音游韵律源点（arcaea）的支持，原理完全相同。

需要您手动提取谱面文件（比phigros简单，网上搜索一下就能找到），再运行`闊靛緥婧愮偣/main.py`，按照程序提示输入。

支持的谱面声明包括：
+ 函数：`arc()`、`arctap()`、`timing()`和`hold()`，`scenecontrol()`会被忽略
+ easing：`b`、`s`、`si`、`so`、`sisi`、`soso`、`siso`和`sosi`
+ 其余**均不支持**，尤其是对camera的操作

## 致谢
+ `control.py`中的大部分代码参考自[Genymobile/scrcpy](https://github.com/Genymobile/scrcpy) 。
+ `catalog.py`和`extract.py`中的代码参考自[Perfare/AssetStudio](https://github.com/Perfare/AssetStudio) 。

感谢上述优秀的项目和创造或维护它们的个人或企业。

## 开源许可
除部分有参考来源的代码按其作者要求的方式开源外，**其余代码按照`WTFPL`许可开源。**

## 赞助开发

如果本项目帮到了你，并且你对本项目抱有感激之情（作者自作多情了，大部分情况下并不会有），那么你可以（以下任选）：

+ **用你喜欢的方式感谢并支持鸽游，他们是一群很棒的人！**
+ 使用你的双手练习你使用本项目完成过的曲目，争取拿到金色的phi
+ 给这个项目点个star
+ 给我爹[@卦者那啥子靈風](https://space.bilibili.com/2679304)点个关注
+ [爱发电](https://www.bilibili.com/video/av809137829)
